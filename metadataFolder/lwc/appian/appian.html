<template>
  <template class="slds-p-around_small" lwc:if={isLoading}>
    <p>Loading...</p>
  </template>
  <template class="slds-p-around_small" lwc:else>
    <lightning-input
      type="search"
      label="Search"
      onchange={handleSearch}
      value={searchTerm}
      placeholder="Search by keywords, titles, themes, etc.">
    </lightning-input>
    <lightning-dual-listbox
      name="columns"
      label="Select Columns"
      source-label="Available Columns"
      selected-label="Selected Columns"
      field-level-help="Select the columns you want to display in the table"
      options={comboboxOptions}
      value={selectedColumns}
      onchange={handleColumnSelection}>
    </lightning-dual-listbox>
    <lightning-datatable
      key-field="_id"
      data={filteredData}
      columns={columns}
      hide-checkbox-column="true">
    </lightning-datatable>
    <template lwc:if={error}>
      <p>Error: {error.message}</p>
    </template>
  </template>
</template>
